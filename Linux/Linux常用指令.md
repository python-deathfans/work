---
title: Linux常用指令
date: 2022-08-25 05:09:02
updated: 2022-08-25 05:09:02
tags: ['Linux']
categories: 
- [Linux]
cover: https://pic.imgdb.cn/item/6306940316f2c2beb1ef916f.png
description: 本篇介绍工作中常用的Linux指令，在此输出，用于巩固和加强记忆。
---

## Vi编辑器

> 进入命令：
>
> + vi file
> + vim file
> + view file

翻页快捷键

+ ctrl + d
  + 向后半页
+ ctrl + u
  + 向前半页
+ ctrl + f
  + 向前一页
+ ctrl + b
  + 向后一页
+ 方向键

## grep

> linux中强大的**文本搜索指令**，可以配合**正则表达式**，达到高效的搜索

+ -l
  + 以指定字符串查找对应的文件名
+ -i
  + 忽略字符大小写
+ -v
  + 反向查找
  + 查找不匹配的行

+ -n
  + 打印行号

+ -r
  + 递归查找

## sed

> sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：
>
> 1. 每次**仅读取一行内容**；
> 2. 根据提供的规则命令匹配并修改数据。注意，sed 默认**不会直接修改源文件数据**，而是会将数据复制到缓冲区中，修改也仅限于**缓冲区中的数据**；
> 3. 将执行结果输出。
>
> 当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。c

+ 替换命令

  + [address]s/pattern/replacement/flags

    > 其中，address 表示指定**要操作的具体行**，pattern 指的是需要替换的内容，replacement 指的是要替换的新内容。

    ![](https://pic.imgdb.cn/item/63954665b1fccdcd36ecf677.jpg)

  +  sed 's/test/trial/2' data4.txt
    + 只替换第二次匹配到的
  + sed 's/test/trial/g' data4.txt
    + 全部替换，每行中所有匹配到的
  + sed -n 's/test/trial/p' data5.txt
    + 打印修改过的行
    + -n必需和p结合使用
  +  sed 's/test/trial/w test.txt' data5.txt
    + w可以将修改的结果输出到指定文件

+ 删除命令

  + [address]d
  +  sed '3d' data6.txt
    + 删除第3行
  +  sed '2,3d' data6.txt
    + 删除2，3行
  +  sed '3,$d' data6.txt
    + 删除第3行到结尾之间的内容

+ 打印

  + sed -n '100,200p' file

+ 寻址方式

  > 1. 以数字形式指定行区间；
  > 2. 用文本模式指定具体行区间。

  + sed '2s/dog/cat/' data1.txt
    + 只替换第二行的内容
  + sed '2,$s/dog/cat/' data1.txt
    + 修改第2行到结尾行的内容


## find

> linux中一切皆文件，如何查找文件是学习Linux必须掌握的技能

按照文件名

+ find 路径 -name '文件名'
  + find /home -name "*.c"
  + 查找/home目录下的所有以.c为后缀的文件

按照文件类型

+ -type
  + d
  + 文件夹
  + f
    + 普通文件


按照文件大小

+ -size	
  + +10M
    + 超过10M的文件


按照修改时间

+ atime
  + 读取时间
+ ctime
  + change time
  + 文件权限修改时间
+ mtime
  + modify time
  + 文件修改时间

**-exec**

+ 类似与管道符
+ 将前面的输出输入到后面的命令

## 新手必须掌握的Linux指令

### 常用系统工作命令

+ **echo**
  + 将字符串的值重新在终端中进行显示
  + 使用$param，可以将param变量的值打印在终端中
+ reboot
  + 重启
+ poweroff
  + 关机
+ **shutdown**
  + -r
    + 重启
  + -h
    + 关机
  + +1
    + 表示1分钟之后重启或者关机
  + -c
    + 取消最近的一个关机或者重启任务
+ **ps**
  + process status
  + 进程状态
  + -a
    + 列出带有终端的所有用户的进程
  + -u
    + 面向用户友好的显示风格
  + -x
    + 列出当前用户的所有进程
  + -e
    + 列出所有进程
  + -f
    + 显示完整格式的进程列表
+ **终止进程**
  + kill PID -9	
    + 强制终止

  + killall 进程名称
    + 范围终止
    + 带有进程名称的进程全部杀死

+ **top**
  + 动态监视系统运行状态及负载状态
  + 类似于windows 任务管理器
+ **pidof**
  + 查询某个服务的进程数值
  + 常用于杀死对应的进程

### 系统监测命令

+ free -h
  + 查看系统**内存**使用情况
+ who
  + 查看当前登录终端的用户信息
+ history
  + 查看之前敲过的命令
  + 以日志的形式存在的
  + **-c**
    + 参数表示清空日志
+ **du**
  + 磁盘占用情况
  + disk usage
  + 主要用于查看目录或者文件大小
  + -h
    + 人性化阅读

  + -s
    + 只显示当前路径的总占用

  + -a
    + 所有

  + -c
    + 显示总和

  + --max-depth=1

+ **df**
  + disk free
  + 空余磁盘
  + -h
    + 人性化显示


### 工作目录切换命令

+ pwd
+ cd
  + cd ~
    + 切换到家目录
  + cd -
    + 切换到上一次目录
  + cd ..
    + 切换到父级目录
+ ls
  + 显示当前目录下的文件信息
  + -a
    + 显示全部文件，包括隐藏文件。Linux中隐藏文件以.开头
  + -l
    + 更全面的显示文件信息：文件大小、创建时间、所属用户、文件类型等
  + -d
    + 只显示当前目录的文件夹信息，不包括他们的子目录

### 文本文件编辑命令

+ **cat**

  + 输出文本文件的内容
  + 要求：仅限内容较少时
  + -n
    + 用于显示行号

+ **more**

  + 查看纯文本文件（**内容较多**的），格式为“more [选项]文件”。
  + q
    + 退出
  + 回车
    + 用于向下翻一行

+ head

  + head命令用于查看纯文本文档的前N行，格式为“head [选项] [文件]”。
  + head -n num file
  + head -num file

+ tail

  + tail命令用于查看纯文本文档的末尾N行，格式为“tail [选项] [文件]”。
  + **持续刷新文件**
  + tail -num file
  + tail -n num file

+ **tr**

  + **用于字符串的替换**
  + 注：只是将文件拷贝了一份，然后对于拷贝的文件进行字符串替换，源文件不做任何操作

  

### 文本文件管理命令

+ **touch**
  + 文件创建命令
  + 当文件不存在时，表示创建一个空白文件
  + 当文件存在时，则是更新文件创建时间
+ **mkdir**
  + 文件夹创建
  + 如果需要递归创建多个文件夹，则需要加上-p参数
+ **cp**
  + 文件拷贝
  + 可以是文件夹或者是文件
  + 如果需要拷贝文件夹，需要加上-r参数
+ **mv**
  + 文件剪切
  + 方法同cp
  + 如果需要剪切文件夹，。则需要加上-r参数
+ **rm**
  + 文件删除命令
  + -f
    + 表示强制删除，没有交互信息
  + -r
    + 递归删除，主要用于文件夹的删除
    + **sudo rm -rf /***

### 打包压缩与文件搜索

+ **tar**
  + tar -czvf
  + tar -xzvf

    - **-C**
      - 指定解压目录

  + tar -Pczvf

    - 压缩包放在其他路径，**需要加上-P参数，不清除文件中'/'引导符**

  + --exclude

    - 排除一些文件不打包

    - 遇到目录，最后一个目录后面不要加/

    - 比如，要排除当前路径下的a文件夹，--exclude=a

    - 比如，排除/root/a/c的文件夹，--exclude=/root/a/c，c后面不要加/

    - tar -czvf tmp.tar.gz --exclude=*.log linux/

      - 打包的时候要回到上一级目录

      - 排除的时候由于是位置参数，所以需要写在路径的前面

  + tar tzvf tmp.tar.gz

    - **查看压缩包中的内容**

    - 简洁命令查看
      - **tar tf tmp.tar.gz**
+ **grep**
  + 文本文件搜索
  + 常用参数
    + -n
      + 显示行号
    + -i
      + 忽略字符串大小写
    + -v
      + 反向选择
    + -r
      + 递归搜索
    + -E
      + 正则扩展，可以实现与和或的操作
    + **-l**
      + **搜索含有目标字符串的文件，通常和-r配合使用**
    + -B
      + 包含匹配的前num行内容
    + -A
      + 包含匹配内容的后num行内容
+ awk
  + -F
    + 指定分隔符，默认是空格

  + '$0 !~/this/ {print}'
    + 打印不包含this的行

  + '$0 ~/^this/ {print}'
    + 打印不以thi开头的行

  + '$0 ~/this$/ {print}'
    + 打印以this结尾的行

  + 'NF!=0{print}'
    + 打印非空行

  + '$0 != NULL {print}'
    + 打印非空行


## 管道符以及通配符

### 重定向

+ 命令 > 文件
+ 命令 2> 文件
+ 命令 >> 文件
+ 命令 2>> 文件

### 管道符

> 将原本要输出到控制台的信息当作第二个命令的输入

### 通配符

+ 常用通配符
  + *
    + 代表0个或者多个字符
  + ？
    + 代表单个字符
  + [0-9]
    + 匹配0-9中的任何一个字符
  + [a-z]
    + 匹配a-z中的任何一个字符
  + [abce]
    + 匹配abce中的任何一个字符

### 转义字符

+ \\
  + 可以将变量转义为单纯的字符串
+ ''
  + 转义其中的变量为普通字符串
+ ""
  + 保留变量属性值
+ ``
  + 将命令执行结果输出到终端

## Vim

### 	普通模式

+ 复制
  + yy
  + yw
  + y$
    + 复制光标所在位置到该行的结尾
  + y^
    + 复制光标所在位置到该行的开头
  + 3yy
+ 粘贴
  + p
+ 光标移动
  + hjkl
  + gg
    + 跳转到文档开头所在的行
  + G
    + 跳转到文档结尾所在的行
  + w
    + 跳转到下一个单词的开头
  + b
    + 跳转到上一个单词的开头
  + e
    + 下一个单词的结尾
  + 0
    + 快速跳转到光标所在的行开头
  + $
    + 快速跳转到光标所在的行结尾
  + **numG/H**
    + 可以快速跳转到第 num行

+ 删除
  + dd
  + 3dd
  + x
    + 相当于win中的delete
  + X
    + 相当于win中的退格键
  + dw
    + 删除单词
  + cw
    + 删除单词并插入
+ 撤销
  + u

### 编辑模式

+ 插入
  + i 
    + 插入光标前面
  + a
    + 追加光标后面进行追加
  + o
    + 插入一个空白行在光标下一行并编辑
  + I
    + 在该行的开始插入
  + A
    + 在该行的结尾插入
  + O
    + 在光标上一行插入空白行并编辑

### 底端模式(命令模式)

+ 保存
  + w
  + wq
+ 退出
  + q
  + q!
+ 搜索
  + /
  + n
  + N
+ 替换
  + :s/ori/dest
    + 匹配光标所在行第一个 进行替换
  + /g
    + 当前行所有的匹配都进行替换
  + %s/ori/dest/g
    + 全文中所有的ori替换为dst
+ 显示行号
  + :set nu
+ 不显示行号
  + :set nonu

## SHELL

> Shell终端解释器当作人与计算机硬件之间的“翻译官”，它作为用户与Linux系统内部的通信媒介，除了能够支持各种**变量**与**参数**外，还提供了诸如**循环**、**分支**等高级编程语言才有的控制结构特性。

### 最简单的脚本

+ 需要声明解释器路径
  + #! /bin/bash
    + 不确定的情况下，可以执行 `echo $SHELL`
  + 输入一些简单的命令
    + pwd
    + ls -al
    + ps -aux

+ 执行
  + **bash 脚本.sh**
  + **./脚本.sh**
    + 需要给脚本开启可执行权限
    + 如若没有可执行权限，执行 `chmod u+x 脚本.sh`

### 接收用户的参数

+ $0
  + 脚本名称
+ $#
  + 代表位置参数的个数
+ $*
  + 所有位置参数的值
+ $数字
  + 代表对应位置的参数值
+ $？
  + 代表上一个执行结果的返回值

### 判断用户参数

> [ 表达式 ]
>
> + 两端均有空格
>
> + 0 代表条件成立
> + 非0 代表条件不成立

+ 文件测试语句

  + -d
  + -e
  + -f
  + -r
  + -w
  + -x

+ 逻辑测试语句

  + 与

    + &&

    + 表示当前的命令执行成功后才会执行后面的命令

  + 或

    + ||
    + 表示前面的命令执行失败才会执行后面的命令

  + 非

    + !

+ 数值测试语句

  + -eq
  + -ne
  + -gt
  + -lt
  + -le
  + -ge

+ 字符串测试语句

  + =
  + !=
  + -z
    + 判断字符串是否为空

### 流程控制语句

> 顺序、选择、循环
>
> 选择
>
> + if
> + case
>
> 循环
>
> + for
> + while

#### if

+ 单分支

  ```shell
  if 条件判断
  	then 操作
  fi
  ```

+ 双分支

  ```shell
  if 条件判断
  	then 操作1
  else
  	操作2
  fi
  ```

+ 多分支

  ```shell
  if 条件判断1
  	then 操作1
  elif 条件判断2
  	then 操作2
  else
  	操作
  fi
  ```

#### for

> for 变量名 in 列表
>
> do
>
> ​	操作
>
> done

#### while

> while 条件判断
>
> do
>
> ​	操作
>
> done

#### case

> ![image-20220906061910314](C:\Users\bzl\AppData\Roaming\Typora\typora-user-images\image-20220906061910314.png)

## 文件权限

> 文件有对应的所有者、所有组以及其他人所拥有的权限，分为可读(r)、可写(w)以及可执行(x)权限；
>
> 对于目录而言
>
> + 可读：能够读取目录下的文件列表
> + 可写：能够在目录内新增、删除、重命名为文件
> + 可执行：能够进入目录

文件类型

+ 普通文件 -
+ 目录文件 d
+ 链接文件 l
+ 块设备文件 b
+ 字符设备文件 c
+ 管道文件 p

## 用户管理

+ useradd 
  + 添加新用户
  + useradd -g 组名 用户名
  + useradd -dm /home/dave david
    + -d 指定用户主目录
    + -m 没有该目录则进行创建
    + david是用户名
+ passwd 用户
  + 刚开始创建的用户处于被锁定状态
  + 必需使用该命令进行解锁，即使不添加任何密码
+ id 用户名
  + 查看用户信息
+ /etc/passwd
  + 查看所有用户信息
+ su
  + 切换用户
+ exit
  + 退出当前用户
  + 由于是层层嵌套，所以会以上一个用户的身份登录
+ whoami
+ sudo
  + 给一个普通用户临时赋予管理员权限
+ userdel 用户 -r
  + 删除用户及其家目录

## 用户组管理

> 新建一个用户默认创建一个同名的组

+ groupadd 组名
+ /etc/group
+ usermod -g 组名 用户名
  + 修改用户所在的组
+ groupmod -n 组名 原组名
  + 修改组名
+ groupdel 组名
